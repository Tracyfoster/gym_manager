<div class="d-sm-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-gray-800"><%= @customer.full_name %></h1>
  <a href="<%= customers_path %>" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-arrow-left fa-sm text-white-50"></i> Back </a>
</div>

<div class="row">
  <div class="col-xl-3 col-lg-4">
    <div class="card shadow mb-4">
      <!-- Card Header - Dropdown -->
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">Photo</h6>
      </div>
      <!-- Card Body -->
      <div class="card-body">
        <div>
          <% if @customer.avatar? %>
            <%= image_tag(@customer.avatar, class:"img-cust") %>
          <% else %>
            <%= image_tag("default.png", class:"img-cust") %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Area Chart -->
  <div class="col-xl-9 col-lg-8">
    <div class="card shadow mb-4">
      <!-- Card Header - Dropdown -->
      <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-primary">Profile Details</h6>
      </div>
      <!-- Card Body -->
      <div class="card-body">
        <div class="row">
          <div class="col-xl-4 col-md-6 mb-4 text-capitalize">
            <span class="font-weight-bold text-gray-800">Surefit ID: </span><%= @customer.slug %>
          </div>
          <div class="col-xl-4 col-md-6 mb-4 text-capitalize">
            <span class="font-weight-bold text-gray-800">Status: </span><%= @customer.status %>
          </div>
          <div class="col-xl-4 col-md-6 mb-4 text-capitalize">
            <span class="font-weight-bold text-gray-800">Gender: </span><%= @customer.gender %>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-6 col-md-6 mb-4">
            <span class="font-weight-bold text-gray-800">Email Address: </span><%= @customer.email %>
          </div>
          <div class="col-xl-6 col-md-6 mb-4">
            <span class="font-weight-bold text-gray-800">Phone number: </span><%= @customer.phone_number %>
          </div>
        </div>
        <div class="row">
          <div class="col-xl-6 col-md-6 mb-4">
            <span class="font-weight-bold text-gray-800">Birthday: </span><%= @customer.date_of_birth %>
          </div>
          <div class="col-xl-6 col-md-6 mb-4">
            <span class="font-weight-bold text-gray-800">Date Joined: </span><%= @customer.date_joined %>
          </div>
        </div>
        <div class="row">
          <div class="col-12 mb-4">
            <div class="text-capitalize">
              <span class="font-weight-bold text-gray-800">Contact Address: </span><%= @customer.address %>
            </div>
          </div>
        </div>
        <div class="row no-gutters">
          <div class="col-xl-1 col-md-1 mb-2">
            <div class="text-capitalize">
              <a href="<%= edit_customer_path(@customer) %>" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-edit fa-sm text-white-50"></i> Edit </a>
            </div>
          </div>
          <% if @customer.avatar? %>
            <div class="col-xl-2 col-md-2 mb-2">
              <%= form_for(@customer) do |f| %>
              <%= f.check_box :remove_avatar, checked: true, style: 'visibility: hidden' %>
              <%= f.submit "Remove Photo", class:"d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" %>
              <% end %>
            </div>
          <% end %>
          <div class="col-xl-3 col-md-3 mb-2 pl-3">
            <div class="text-capitalize">
              <a href="<%= new_subscription_path(@customer) %>" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-plus fa-sm text-white-50"></i> New Subscription </a>
            </div>
          </div>
        </div> 
      </div>
    </div>
  </div>
</div>

<div class="card shadow mb-4">
  <div class="card-header py-3">
    <h6 class="m-0 font-weight-bold text-primary">Subscriptions</h6>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered table-hover" id="dataTable" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th>Plan Name</th>
            <th>Receipt number</th>
            <th>Mode of payment</th>
            <th>Start date</th>
            <th>End date</th>
            <th>Amount paid</th>
            <th>Balance</th>
            <th>Discount</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @subscriptions.each do |subscription| %>
            <tr>
              <td><%= subscription.plan.subscription_name %></td>
              <td><%= subscription.receipt_number %></td>
              <td><%= subscription.mode_of_payment %></td>
              <td><%= subscription.start_date %></td>
              <td><%= subscription.end_date %></td>
              <td><%= subscription.amount_paid %></td>
              <td><%= subscription.balance %></td>
              <td><%= subscription.discount %></td>
              <td><%= subscription.status %></td>
              <td><%= link_to 'Edit', edit_subscription_path(subscription) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="card shadow mb-4">
  <div class="card-header py-3">
    <h6 class="m-0 font-weight-bold text-primary">Attendance</h6>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-bordered table-hover" id="dataTable" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th>Subscription Period</th>
            <th>Date Attended</th>
            <th>Checked-in By</th>
          </tr>
        </thead>

        <tbody>
          <% @attendances.each do |attend| %>
            <tr>
              <td><%= attend.customer.sub_period %></td>
              <td><%= attend.date_attended %></td>
              <td><%= attend.user.full_name %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
